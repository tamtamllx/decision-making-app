<html>

<head>
    <title>Indecisive App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        body{
            padding: 1% 2%;
        }
        h4{
            padding-bottom: 1%;
        }
        button{
            margin-bottom: 15px;
        }
    </style>
</head>

<body>
    <h1>Indecisive App</h1>
    <h4>Put your choices in the hands of a computer.</h4>
    <button type="button" class="btn btn-primary" id="selectRandom" onclick="selectRandom()">What should i do?</button>
    <br>
    <button type="button" class="btn btn-danger" id="removeAll" onclick="deleteAll()">Remove All</button>
    <ul id="myul" style="list-style: none; padding-left: 0px;">
        <li value="Watch Movie">Watch Movie
            <button type="button" class="btn btn-warning" onclick="remove(this.parentNode)">Remove Option</button>
        </li>
    </ul>
    <input id="userinput" onkeypress="addListAfterKeyPress()" type="text" placeholder="">
    <button type="button" class="btn btn-secondary" id="enter" onclick="addListAfterClick()">Add Options</button>
    <script>
        function selectRandom(){
            var num = Math.floor((Math.random() * document.getElementsByTagName("li").length) + 1);
            // console.log(num);
            alert(document.getElementsByTagName("li")[num-1].getAttribute("value"));
        }

        function deleteAll(){
            var ul = document.getElementById("myul");
            while (ul.hasChildNodes()) {  
                ul.removeChild(ul.firstChild);
            }
            disableEnableButton()
            // document.getElementById("myul").innerHTML = '';
            // document.getElementById("selectRandom").disabled = true;
        }

        function disableEnableButton() {
            // console.log(document.getElementsByTagName("li").length);
            if (document.getElementsByTagName("li").length == 0) {
                document.getElementById("selectRandom").disabled = true;
            }
            else {
                document.getElementById("selectRandom").disabled = false;
            }
        }

        function addListAfterClick() {
            console.log(event);
            var input = document.getElementById("userinput");
            if (input.value.length > 0) {
                createNewItem(input);
                input.value = "";
            }
        }

        function addListAfterKeyPress() {
            // console.log(event);
            // console.log(event.keyCode);
            var input = document.getElementById("userinput");
            if (input.value.length > 0 && event.keyCode == 13) {
                createNewItem(input);
                input.value = "";
            }
        }

        function createNewItem(item) {
            var ul = document.getElementsByTagName("ul")[0];
            var li = document.createElement("li");
            li.innerHTML = item.value + " <button type='button' class='btn btn-warning' onclick='remove(this.parentNode)'>Remove Option</button>";
            li.setAttribute("value", item.value);
            ul.appendChild(li);
            disableEnableButton()        
        }

        function remove(obj) {
            var ul = document.getElementById("myul");
            ul.removeChild(obj);
            console.log(obj)
            disableEnableButton();
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</body>

</html>